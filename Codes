The realization for the whole functionality
